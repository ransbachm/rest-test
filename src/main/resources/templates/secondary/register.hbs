<!DOCTYPE html>
<html>
<head>
    {{> templates/secondary/partials/common}}
    <title>Th_Eshop</title>
    <link rel="stylesheet" href="/static/secondary/css/register.css">
</head>

<body>
{{> templates/secondary/partials/header}}

<div class="back-content">
    <div class="content">

        <div class="login-form">
            <h2>Register a new Th_Eshop account</h2>
            <form action="/login" method="POST">

                <div class="parent">
                    <div class="div0">
                        <label for="firstname">First name</label><br>
                        <input name="firstname" pattern=".+"
                               oninput="register_field_change(this);"><br>
                    </div>

                    <label for="lastname">Last name</label>
                    <input name="lastname" pattern=".+" oninput="register_field_change(this);"><br>

                    <label for="email" type="email">Email</label><br>
                    <input name="email" type="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                           oninput="register_field_change(this);"><br>

                    <label for="password" type="password">Password </label>
                    <input name="password" type="password" pattern=".{5,}" oninput="register_field_change(this);"><br>

                    <label for="password_confirm" type="password">Confirm Password </label>
                    <input name="password_confirm" type="password" pattern=".{5,}" oninput="register_field_change(this);"><br>

                    <label for="housenumber">House No.</label>
                    <input name="housenumber" pattern=".+" oninput="register_field_change(this);"><br>

                    <label for="lastname">Street</label>
                    <input name="street" pattern=".+" oninput="register_field_change(this);"><br>

                    <label for="zipcode">Zipcode</label>
                    <input name="zipcode" pattern=".+" oninput="register_field_change(this);"><br>


                    <input type="submit" value="register">
                    <a class="register-a" href="/login">...or login</a>
                </div>
            </form>
        </div>
        <div class="nonsense-text">
            <p>
                By creating an account you can
                discover millions of products available
                on Th_Eshop. If you already have an
                account you can also <a href="/login">log in</a>
                to your account.
            </p>
            <p>
                By creating an account you also accept and agree
                with the fictional terms and conditions
                described out in our <a href="/terms-of-service">Terms of Service</a>
                and our <a href="/privacy">Privacy Policy</a>.

                Th_Eshop collects data for improving service and reliability.
                You can also <a href="/privacy#opt-out">opt out</a> of our optional data collection.
            </p>
        </div>
    </div>
</div>

<script>

    let inputs = [...document.querySelectorAll(".login-form input:not([type=submit])")];
    let submit = document.querySelector(".login-form input[type=submit]");


    function register_field_change() {
        let choice;
        let valid = inputs
                .map(e => e.checkValidity() && !!e.value)
                .reduce((a,v) => a&&v);

        if(valid) {
            choice = "var(--col-enable)"
        } else {
            choice = "var(--col-disable)"
        }
        submit.style.backgroundColor = choice;
        submit.disabled = !valid;
    }
</script>

{{> templates/secondary/partials/footer}}
</body>
</html>